(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36de7a01"],{"17b6":function(e,t,a){"use strict";var r=a("c9b1"),i=a.n(r);i.a},"1d19":function(e,t,a){},"5a48":function(e,t,a){"use strict";var r=a("1d19"),i=a.n(r);i.a},"727b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-details"},[e.userDetails.isShow?a("user-details-dialog",{attrs:{isShow:e.userDetails.isShow,dialogRow:e.userDetails.dialogRow},on:{getCaseList:e.getDataList,closeDialog:e.hideDialog}}):e._e(),a("el-button",{staticClass:"add-case",attrs:{type:"primary",size:"large"},on:{click:function(t){e.showDialog(),e.setEmptyForm()}}},[e._v("添加客户")]),a("date-picker",{staticStyle:{"margin-bottom":"15px"},on:{changeDate:function(t){return e.changeDate(t)}}}),a("filter-vip",{on:{selectIsVip:function(t){return e.selectIsVip(t)}}}),a("search",{on:{searchUserList:function(t){return e.searchUserList(t)}}}),a("div",{staticClass:"table_container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",data:e.table,height:e.tableHeight,"default-sort":{prop:"update_time",order:"descending"},align:"center"}},[a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center"}}),a("el-table-column",{attrs:{prop:"tel",label:"联系电话",align:"center"}}),a("el-table-column",{attrs:{prop:"wx_number",label:"微信号",align:"center"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"vip",label:"vip",align:"center",formatter:e.isVip}}),a("el-table-column",{attrs:{prop:"note",label:"备注",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"update_time",sortable:"",label:"更新日期",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(Date.format(t.row.update_time)))])]}}])}),a("el-table-column",{attrs:{prop:"operation",align:"center",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"edit",size:"mini"},on:{click:function(a){return e.lookCaseListStatus(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"delete",size:"mini"},on:{click:function(a){return e.deleteUser(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{attrs:{pageTotal:e.pageTotal},on:{handleCurrentChange:e.handleCurrentChange,handleSizeChange:e.handleSizeChange}})],1)],1)},i=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),l=a("c24f"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{visible:e.isVisible,title:e.dialogRow.title,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,center:""},on:{"update:visible":function(t){e.isVisible=t},close:e.closeDialog}},[a("el-form",{ref:"ruleForm",staticClass:"user-ruleForm",attrs:{model:e.ruleForm,rules:e.form_rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{directives:[{name:"clearSpecial",rawName:"v-clearSpecial:[ruleForm.name]",value:{set:e.setValue,setName:"name"},expression:"{set:setValue, setName:'name'}",arg:e.ruleForm.name}],attrs:{maxlength:"20","show-word-limit":""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),a("el-form-item",{attrs:{label:"联系电话",prop:"tel"}},[a("el-input",{directives:[{name:"clearSpecial",rawName:"v-clearSpecial:[ruleForm.tel]",value:{set:e.setValue,setName:"tel"},expression:"{set:setValue, setName:'tel'}",arg:e.ruleForm.tel},{name:"numberInt",rawName:"v-numberInt"}],attrs:{maxlength:"11","show-word-limit":""},model:{value:e.ruleForm.tel,callback:function(t){e.$set(e.ruleForm,"tel",t)},expression:"ruleForm.tel"}})],1),a("el-form-item",{attrs:{label:"微信号"}},[a("el-input",{directives:[{name:"clearSpecial",rawName:"v-clearSpecial:[ruleForm.wx_number]",value:{set:e.setValue,setName:"wx_number"},expression:"{set:setValue, setName:'wx_number'}",arg:e.ruleForm.wx_number}],attrs:{maxlength:"40","show-word-limit":""},model:{value:e.ruleForm.wx_number,callback:function(t){e.$set(e.ruleForm,"wx_number",t)},expression:"ruleForm.wx_number"}})],1),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),a("el-form-item",{attrs:{label:"vip",prop:"vip"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.vip,callback:function(t){e.$set(e.ruleForm,"vip",t)},expression:"ruleForm.vip"}},e._l(e.vipOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",maxlength:"80","show-word-limit":""},model:{value:e.ruleForm.note,callback:function(t){e.$set(e.ruleForm,"note",t)},expression:"ruleForm.note"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提 交")]),a("el-button",{on:{click:e.closeDialog}},[e._v("取 消")])],1)],1)],1)},s=[],u=(a("c5f6"),a("7cdf"),a("5880"));function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={name:"orderDialog",data:function(){var e=function(e,t,a){var r=/^1[3|4|5|6|7|8][0-9]{9}$/;if(!t)return a(new Error("电话号码不能为空"));setTimeout((function(){Number.isInteger(+t)?r.test(t)?a():a(new Error("电话号码格式不正确")):a(new Error("请输入数字值"))}),100)};return{isVisible:this.isShow,ruleForm:{name:"",tel:"",wx_number:"",email:"",vip:"",note:""},form_rules:{name:[{required:!0,message:"请输入客户姓名",trigger:"blur"}],tel:[{required:!0,message:"请输入联系电话",trigger:"blur"},{validator:e,trigger:"blur"}],vip:[{required:!0,message:"请选择是否vip",trigger:"blur"}],update_time:[{required:!0,message:"请选择开始日期",trigger:"blur"}]},vipOptions:[{value:1,label:"是"},{value:0,label:"否"}]}},props:{isShow:Boolean,dialogRow:Object,default:function(){}},computed:m({},Object(u["mapGetters"])(["systemType","status"])),mounted:function(){var e=this;"add"===this.status?this.$nextTick((function(){e.$refs["ruleForm"].resetFields()})):this.ruleForm=this.dialogRow},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var a=t.ruleForm;t.showLoading(),"add"===t.status?Object(l["a"])(a).then((function(e){t.$refs["ruleForm"].resetFields(),t.closeDialog(),t.message("新增订单成功"),t.$emit("getCaseList")})).finally((function(){t.hideLoading()})):Object(l["c"])(a).then((function(e){t.$refs["ruleForm"].resetFields(),t.closeDialog(),t.message("修改订单成功"),t.$emit("getCaseList")})).finally((function(){t.hideLoading()}))}))},closeDialog:function(){this.$emit("closeDialog")},setValue:function(e,t){this.ruleForm[e]=t}}},g=p,f=(a("77a4"),a("2877")),d=Object(f["a"])(g,o,s,!1,null,"358b30ca",null),b=d.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"filter-vip inline-block"},[a("span",{staticClass:"filter-type-text"},[e._v("是否会员")]),a("el-select",{attrs:{size:"large",placeholder:"请选择"},on:{change:e.changeType},model:{value:e.isVip,callback:function(t){e.isVip=t},expression:"isVip"}},e._l(e.vipOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)},v=[],w={name:"filterVip",data:function(){return{isVip:-1,vipOptions:[{value:-1,label:"全部"},{value:1,label:"是"},{value:0,label:"否"}]}},methods:{changeType:function(e){this.$emit("selectIsVip",e)}}},D=w,F=(a("17b6"),Object(f["a"])(D,h,v,!1,null,"3ccc5051",null)),O=F.exports;function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(a,!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x={name:"userDetails",data:function(){return Object(n["a"])({loading:!0,table:[],tableHeight:0,userDetails:{isShow:!1,dialogRow:{}},paginationForm:{pageNum:1,pageSize:20,search_name:"",vip:-1,start_time:"",end_time:"",delete_status:0},pageTotal:0},"tableHeight",0)},components:{userDetailsDialog:b,filterVip:O},mounted:function(){this.getDataList(),this.setTableHeight()},methods:{setTableHeight:function(){var e=this;this.$nextTick((function(){e.tableHeight=document.body.clientHeight-250}))},getDataList:function(){var e=this,t=this.paginationForm;Object(l["d"])(t).then((function(t){e.table=t.data||[],e.pageTotal=t.count})).finally((function(){e.loading=!1}))},handleCurrentChange:function(e){this.paginationForm.pageNum=e,this.getDataList()},handleSizeChange:function(e){this.paginationForm.pageSize=e,this.getDataList()},changeDate:function(e){this.paginationForm.start_time=e?Date.formatDate(e[0]):"",this.paginationForm.end_time=e?Date.formatDate(e[1]):"",this.getDataList()},searchUserList:function(e){this.paginationForm.pageNum=1,this.paginationForm.search_name=e,this.getDataList()},showDialog:function(){this.userDetails.isShow=!0},hideDialog:function(){this.userDetails.isShow=!1},setEmptyForm:function(){this.$store.commit("SET_ADDOREDIT","add")},isVip:function(e){var t=e.vip;return 0===t?"否":1===t?"是":"否"},lookCaseListStatus:function(e){this.userDetails.dialogRow=_({},e),this.showDialog(),this.$store.commit("SET_ADDOREDIT","edit")},deleteUser:function(e){var t=this,a=e.id;this.alertMsgBox().then((function(){Object(l["b"])(a).then((function(e){t.message(e.msg),t.getDataList()}))})).catch((function(e){t.message("已取消","info")}))},selectIsVip:function(e){this.paginationForm.vip=e,this.getDataList()}}},S=x,j=(a("5a48"),Object(f["a"])(S,r,i,!1,null,"542cae8f",null));t["default"]=j.exports},"77a4":function(e,t,a){"use strict";var r=a("b655"),i=a.n(r);i.a},"7cdf":function(e,t,a){var r=a("5ca1");r(r.S,"Number",{isInteger:a("9c12")})},"9c12":function(e,t,a){var r=a("d3f4"),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},b655:function(e,t,a){},c9b1:function(e,t,a){}}]);