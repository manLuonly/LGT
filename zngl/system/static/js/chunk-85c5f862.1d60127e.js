(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85c5f862"],{"2d07":function(e,t,r){},7597:function(e,t,r){var o=r("fb68"),n=Math.floor;e.exports=function(e){return!o(e)&&isFinite(e)&&n(e)===e}},a340:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-info"},[e.updateUserInfoDialog.show?r("user-info-dialog",{attrs:{isShow:e.updateUserInfoDialog.show,dialogRow:e.updateUserInfoDialog.dialogRow},on:{getUserInfoList:e.getDataList,closeDialog:e.hideUserInfoDialog}}):e._e(),r("div",{staticClass:"add-user inline-block"},[r("el-button",{staticClass:"add-user-btn",attrs:{type:"primary",size:"large"},on:{click:function(t){return e.lookUserStatus(e.dialogTitle="新增客户信息")}}},[e._v("添加客户")])],1),r("date-picker",{on:{changeDate:function(t){return e.changeDate(t)}}}),r("search",{on:{searchUserList:function(t){return e.searchUserList(t)}}}),r("div",{staticClass:"table_container"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,align:"center"}},[r("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center"}}),r("el-table-column",{attrs:{prop:"phone",label:"联系电话",align:"center"}}),r("el-table-column",{attrs:{prop:"wx",label:"微信",align:"center"}}),r("el-table-column",{attrs:{prop:"vip",label:"vip",align:"center",formatter:e.switchConvert}}),r("el-table-column",{attrs:{label:"更新日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(Date.format(t.row.begin_time)))])]}}])}),r("el-table-column",{attrs:{label:"留言",align:"center",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:t.row.leaving}},[r("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.row.leaving))])])]}}])}),r("el-table-column",{attrs:{prop:"operation",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{icon:"edit",size:"mini"},on:{click:function(r){return e.lookUserStatus(t.row,e.dialogTitle="编辑客户信息")}}},[e._v("编辑")]),r("el-button",{attrs:{type:"danger",icon:"delete",size:"mini"},on:{click:function(r){return e.deleteUser(t.row)}}},[e._v("删除")])]}}])})],1),r("pagination",{attrs:{pageTotal:e.pageTotal},on:{handleCurrentChange:e.handleCurrentChange,handleSizeChange:e.handleSizeChange}})],1)],1)},n=[],a=(r("5ab2"),r("6d57"),r("e10e"),r("c0c3"),r("70ea")),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{visible:e.isVisible,title:e.dialogRow.title,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,center:""},on:{"update:visible":function(t){e.isVisible=t},close:e.closeDialog}},[r("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[r("el-input",{attrs:{maxlength:"11"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),r("el-form-item",{attrs:{label:"wx",prop:"wx"}},[r("el-input",{model:{value:e.ruleForm.wx,callback:function(t){e.$set(e.ruleForm,"wx",t)},expression:"ruleForm.wx"}})],1),r("el-form-item",{attrs:{label:"vip",prop:"vip"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.vip,callback:function(t){e.$set(e.ruleForm,"vip",t)},expression:"ruleForm.vip"}},e._l(e.isVipOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"留言",prop:"leaving"}},[r("el-input",{staticClass:"leave-message",attrs:{type:"textarea"},model:{value:e.ruleForm.leaving,callback:function(t){e.$set(e.ruleForm,"leaving",t)},expression:"ruleForm.leaving"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提 交")]),r("el-button",{on:{click:e.closeDialog}},[e._v("取 消")])],1)],1)],1)},l=[],s=(r("163d"),r("c982"),r("5880")),c=r("a27e");function u(e){return Object(c["a"])({url:"/zngl/userInfo",method:"post",data:e})}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m={name:"userInfoDialog",data:function(){var e=function(e,t,r){var o=/^1[3|4|5|6|7|8][0-9]{9}$/;if(!t)return r(new Error("电话号码不能为空"));setTimeout((function(){Number.isInteger(+t)?o.test(t)?r():r(new Error("电话号码格式不正确")):r(new Error("请输入数字值"))}),100)};return{ruleForm:{name:"",phone:"",wx:"",vip:"",leaving:""},rules:{name:[{required:!0,message:"请输入客户姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{validator:e,trigger:"blur"}],vip:[{required:!0,message:"请选择客户是否属于vip",trigger:"blur"}]},isVipOptions:[{value:!0,label:"是"},{value:!1,label:"否"}],isVisible:this.isShow}},props:{isShow:Boolean,dialogRow:Object},computed:g({},Object(s["mapGetters"])(["systemType"])),mounted:function(){var e=this;"新增客户信息"===this.dialogRow.title?this.$nextTick((function(){e.$refs["ruleForm"].resetFields()})):this.ruleForm=this.dialogRow},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var r=t.ruleForm;t.ruleForm.pid=t.systemType,delete r.title,"新增客户信息"===t.dialogRow.title?(t.ruleForm.opr="add",u(r).then((function(e){t.$refs["ruleForm"].resetFields(),t.closeDialog(),t.message("新增客户成功"),t.$emit("getUserInfoList")}))):(t.ruleForm.opr="update",u(r).then((function(e){t.$refs["ruleForm"].resetFields(),t.closeDialog(),t.message("编辑客户成功"),t.$emit("getUserInfoList")})))}))},closeDialog:function(){this.$emit("closeDialog")}}},f=m,h=r("4023"),d=Object(h["a"])(f,i,l,!1,null,"23e48cb8",null),b=d.exports;function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D={data:function(){return{tableData:[],tableHeight:0,ruleForm:{name:"",phone:"",wx:"",mailbox:"",vip:"",leave:""},paginationForm:{opr:"list",pid:"pc",pageNum:1,pageSize:20,startTime:"",endTime:"",searchName:""},pageTotal:2,updateUserInfoDialog:{show:!1,dialogRow:{}}}},components:{userInfoDialog:b},computed:{},mounted:function(){this.getDataList()},methods:{setTableHeight:function(){var e=this;this.$nextTick((function(){e.tableHeight=document.body.clientHeight-300}))},getDataList:function(){var e=this,t=Object.assign({},this.paginationForm);u(t).then((function(t){e.tableData=t.data||[],e.pageTotal=t.data.count}))},switchConvert:function(e){return e.vip?"是":(e.vip,"否")},handleCurrentChange:function(e){this.paginationForm.pageNum=e,this.getDataList()},handleSizeChange:function(e){this.paginationForm.pageSize=e,this.getDataList()},showUserInfoDialog:function(){this.updateUserInfoDialog.show=!0},hideUserInfoDialog:function(){this.updateUserInfoDialog.show=!1},getUserInfoList:function(){},deleteUser:function(e){var t=this;this.alertMsgBox().then((function(){e.opr="delete",u(e).then((function(e){!0===e.success?(t.message(e.msg),t.getDataList()):t.message(e.msg)}))})).catch((function(e){t.message("已取消","info")}))},lookUserStatus:function(e){"新增客户信息"==this.dialogTitle?(this.ruleForm.title="新增客户信息",this.updateUserInfoDialog.dialogRow=w({},this.ruleForm)):(e.title="编辑客户信息",this.updateUserInfoDialog.dialogRow=w({},e)),this.showUserInfoDialog()},selectSystem:function(e){console.log(e,"我是系统类型"),this.paginationForm.pid=e,this.getDataList()},changeDate:function(e){this.paginationForm.startTime=e?Date.formatDate(e[0]):"",this.paginationForm.endTime=e?Date.formatDate(e[1]):"",this.getDataList()},searchUserList:function(e){var t=this;console.log(e,"我是搜索"),this.paginationForm.searchName=e,this.getDataList(),setTimeout((function(){t.$refs.search.searchVal="",t.paginationForm.searchName=""}),1e3)}}},F=D,O=(r("e088"),Object(h["a"])(F,o,n,!1,null,"a1164568",null));t["default"]=O.exports},c982:function(e,t,r){var o=r("e46b");o(o.S,"Number",{isInteger:r("7597")})},e088:function(e,t,r){"use strict";var o=r("2d07"),n=r.n(o);n.a}}]);