(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48bbc1ce"],{4799:function(e,t,r){"use strict";var o=r("f7db"),i=r.n(o);i.a},"4ac5":function(e,t,r){},7597:function(e,t,r){var o=r("fb68"),i=Math.floor;e.exports=function(e){return!o(e)&&isFinite(e)&&i(e)===e}},"9cf5":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var o=r("a27e");function i(e){return Object(o["a"])({url:"/zngl/caseType",method:"post",data:e})}},bb84:function(e,t,r){"use strict";var o=r("4ac5"),i=r.n(o);i.a},c982:function(e,t,r){var o=r("e46b");o(o.S,"Number",{isInteger:r("7597")})},dd5a:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order-details"},[e.updateOrderDialog.pcShow?r("pcorder-dialog",{attrs:{isShow:e.updateOrderDialog.pcShow,dialogRow:e.updateOrderDialog.dialogRow},on:{getOrderList:e.getDataList,closeDialog:e.hideOrderDialog}}):e._e(),e.updateOrderDialog.smShow?r("smorder-dialog",{attrs:{isShow:e.updateOrderDialog.smShow,dialogRow:e.updateOrderDialog.dialogRow},on:{getOrderList:e.getDataList,closeDialog:e.hideOrderDialog}}):e._e(),r("div",{staticClass:"add-order-details inline-block"},[r("el-button",{staticClass:"add-order-details-btn",attrs:{type:"primary",size:"large"},on:{click:function(t){return e.lookorderStatus(e.dialogTitle="添加订单详情")}}},[e._v("添加订单详情")])],1),r("select-system",{on:{selectSystem:function(t){return e.selectSystem(t)}}}),r("date-picker",{on:{changeDate:function(t){return e.changeDate(t)}}}),r("search",{ref:"search",on:{searchUserList:function(t){return e.searchUserList(t)}}}),r("div",{staticClass:"table_container"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"name",label:"客户姓名",align:"center"}}),r("el-table-column",{attrs:{prop:"phone",label:"联系电话",align:"center",width:"110"}}),r("el-table-column",{attrs:{prop:"service",label:"服务项目",align:"center",width:"150"}}),"pc"===e.paginationForm.pid?r("el-table-column",{attrs:{prop:"email",label:"邮箱",align:"center",width:"150"}}):e._e(),r("el-table-column",{attrs:{label:"开始时间",align:"center",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(Date.format(t.row.begin_time)))])]}}])}),r("el-table-column",{attrs:{label:"结束时间",align:"center",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(Date.format(t.row.of_time)))])]}}])}),"pc"===e.paginationForm.pid?r("el-table-column",{attrs:{label:"留言",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:t.row.leaving}},[r("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.row.leaving))])])]}}],null,!1,1761427224)}):e._e(),"pc"===e.paginationForm.pid?r("el-table-column",{attrs:{prop:"state",label:"状态",align:"center",formatter:e.switchConvert},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{class:e.switchConverObj(t.row.state).cls},[e._v(e._s(e.switchConverObj(t.row.state).val))])]}}],null,!1,1705709023)}):e._e(),r("el-table-column",{attrs:{prop:"money",label:"交易金额",align:"center"}}),r("el-table-column",{attrs:{prop:"operation",align:"center",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{icon:"edit",size:"mini"},on:{click:function(r){return e.lookorderStatus(t.row,e.dialogTitle="编辑订单详情")}}},[e._v("编辑")]),r("el-button",{attrs:{type:"danger",icon:"delete",size:"mini"},on:{click:function(r){return e.deleteOrder(t.row)}}},[e._v("删除")])]}}])})],1),r("pagination",{attrs:{pageTotal:e.pageTotal},on:{handleCurrentChange:e.handleCurrentChange,handleSizeChange:e.handleSizeChange}})],1)],1)},i=[],a=(r("5ab2"),r("6d57"),r("e10e"),r("70ea")),l=r("5880"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{visible:e.isVisible,title:e.dialogRow.title,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,center:""},on:{"update:visible":function(t){e.isVisible=t},close:e.closeDialog}},[r("el-form",{ref:"ruleForm",staticClass:"order-ruleForm",attrs:{model:e.ruleForm,rules:e.form_rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"客户姓名",prop:"name"}},[r("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[r("el-input",{attrs:{maxlength:"11"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",e._n(t))},expression:"ruleForm.phone"}})],1),r("el-form-item",{attrs:{label:"服务项目"}},[r("el-checkbox-group",{on:{change:e.changeProject},model:{value:e.service,callback:function(t){e.service=t},expression:"service"}},e._l(e.serviceOptions,(function(t){return r("el-checkbox",{key:t.type,attrs:{label:t.type}},[e._v(e._s(t.type_name))])})),1)],1),r("el-form-item",{attrs:{label:"邮箱"}},[r("el-input",{model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),r("el-form-item",{attrs:{label:"开始日期",prop:"begin_time"}},[r("el-date-picker",{attrs:{disabled:e.isEdit,type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.begin_time,callback:function(t){e.$set(e.ruleForm,"begin_time",t)},expression:"ruleForm.begin_time"}})],1),r("el-form-item",{attrs:{label:"结束日期",prop:"of_time"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.of_time,callback:function(t){e.$set(e.ruleForm,"of_time",t)},expression:"ruleForm.of_time"}})],1),r("el-form-item",{attrs:{label:"留言"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.leaving,callback:function(t){e.$set(e.ruleForm,"leaving",t)},expression:"ruleForm.leaving"}})],1),r("el-form-item",{attrs:{label:"状态",prop:"state"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.state,callback:function(t){e.$set(e.ruleForm,"state",t)},expression:"ruleForm.state"}},e._l(e.orderStatusOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"金额",prop:"money"}},[r("el-input",{attrs:{onkeyup:"this.value=this.value.replace(/[^\\d.]/g,'');"},model:{value:e.ruleForm.money,callback:function(t){e.$set(e.ruleForm,"money",e._n(t))},expression:"ruleForm.money"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提 交")]),r("el-button",{on:{click:e.closeDialog}},[e._v("取 消")])],1)],1)],1)},s=[],c=(r("163d"),r("c982"),r("9cf5")),u=r("a27e");function m(e){return Object(u["a"])({url:"/zngl/userOrderInfo",method:"post",data:e})}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g={name:"orderDialog",data:function(){var e=function(e,t,r){var o=/^1[3|4|5|6|7|8][0-9]{9}$/;if(!t)return r(new Error("电话号码不能为空"));setTimeout((function(){Number.isInteger(+t)?o.test(t)?r():r(new Error("电话号码格式不正确")):r(new Error("请输入数字值"))}),100)};return{ruleForm:{name:"",phone:"",service:"",email:"",begin_time:"",of_time:"",leaving:"",state:"",money:""},form_rules:{name:[{required:!0,message:"请输入客户姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{validator:e,trigger:"blur"}],service:[{required:!0,message:"请选择服务项目",trigger:"change"}],begin_time:[{required:!0,message:"请选择开始日期",trigger:"blur"}],of_time:[{required:!0,message:"请选择结束日期",trigger:"blur"}],state:[{required:!0,message:"请选择状态",trigger:"change"}],money:[{required:!0,message:"请输入金额",trigger:"blur"}]},serviceOptions:[],orderStatusOptions:[{value:0,label:"已完成"},{value:1,label:"进行中"},{value:2,label:"未完成"}],isVisible:this.isShow,isEdit:!1,service:[]}},props:{isShow:Boolean,dialogRow:Object},computed:d({},Object(l["mapGetters"])(["systemType"])),mounted:function(){var e=this;"添加订单详情"===this.dialogRow.title?this.$nextTick((function(){e.$refs["ruleForm"].resetFields()})):(this.isEdit=!0,this.ruleForm=this.dialogRow),this.getCaseType()},methods:{getCaseType:function(){var e=this,t={opr:"list",pid:"pc",pageNum:1,pageSize:20};Object(c["a"])(t).then((function(t){e.serviceOptions=t.data.map((function(e){return e}))||[],e.service=t.data.map((function(e){return e.type_name}))||[]}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var r=t.ruleForm;t.ruleForm.pid=t.systemType,delete r.title,"添加订单详情"===t.dialogRow.title?(t.ruleForm.opr="add",r.begin_time=Date.formatDate(r.begin_time),r.of_time=Date.formatDate(r.of_time),m(r).then((function(e){t.$refs["ruleForm"].resetFields(),t.closeDialog(),t.message("新增订单成功"),t.$emit("getOrderList")}))):(t.ruleForm.opr="update",r.begin_time=Date.Conversiontime(r.begin_time),r.of_time=Date.Conversiontime(r.of_time),m(r).then((function(e){t.$refs["ruleForm"].resetFields(),t.closeDialog(),t.message("修改订单成功"),t.$emit("getOrderList")})))}))},changeProject:function(e){console.log(e,"project"),this.ruleForm.type=e.join(",")},closeDialog:function(){this.$emit("closeDialog")}}},f=g,h=(r("bb84"),r("4023")),b=Object(h["a"])(f,n,s,!1,null,"477facdf",null),v=b.exports,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{visible:e.isVisible,title:e.dialogRow.title,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,center:""},on:{"update:visible":function(t){e.isVisible=t},close:e.closeDialog}},[r("el-form",{ref:"ruleForm",staticClass:"order-ruleForm",attrs:{model:e.ruleForm,rules:e.form_rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"客户姓名",prop:"name"}},[r("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[r("el-input",{attrs:{maxlength:"11"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",e._n(t))},expression:"ruleForm.phone"}})],1),r("el-form-item",{attrs:{label:"服务项目",prop:"service"}},[r("el-select",{attrs:{placeholder:"请选择服务项目"},model:{value:e.ruleForm.service,callback:function(t){e.$set(e.ruleForm,"service",t)},expression:"ruleForm.service"}},e._l(e.serviceOptions,(function(e){return r("el-option",{key:e.type,attrs:{label:e.type_name,value:e.type_name}})})),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提 交")]),r("el-button",{on:{click:e.closeDialog}},[e._v("取 消")])],1)],1)],1)},O=[],w={name:"smorderDialog",data:function(){var e=function(e,t,r){var o=/^1[3|4|5|6|7|8][0-9]{9}$/;if(!t)return r(new Error("电话号码不能为空"));setTimeout((function(){Number.isInteger(+t)?o.test(t)?r():r(new Error("电话号码格式不正确")):r(new Error("请输入数字值"))}),100)};return{ruleForm:{name:"",phone:"",service:""},form_rules:{name:[{required:!0,message:"请输入客户姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{validator:e,trigger:"blur"}],service:[{required:!0,message:"请选择服务项目",trigger:"change"}]},serviceOptions:[],isVisible:this.isShow,service:""}},props:{isShow:Boolean,dialogRow:Object},mounted:function(){var e=this;"添加订单详情"===this.dialogRow.title?this.$nextTick((function(){e.$refs["ruleForm"].resetFields()})):this.ruleForm=this.dialogRow,this.getCaseType()},methods:{getCaseType:function(){var e=this,t={opr:"list",pid:"sm",pageNum:1,pageSize:20};Object(c["a"])(t).then((function(t){e.serviceOptions=t.data.map((function(e){return e}))||[]}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var r=t.ruleForm;t.ruleForm.pid=t.systemType,delete r.title,"添加订单详情"===t.dialogRow.title?(t.ruleForm.opr="add",t.ruleForm.pid="sm",m(r).then((function(e){t.$refs["ruleForm"].resetFields(),t.closeDialog(),t.message("新增订单成功"),t.$emit("getOrderList")}))):(t.ruleForm.opr="update",t.ruleForm.pid="sm",m(r).then((function(e){t.$refs["ruleForm"].resetFields(),t.closeDialog(),t.message("修改订单成功"),t.$emit("getOrderList")})))}}))},closeDialog:function(){this.$emit("closeDialog")}}},y=w,D=Object(h["a"])(y,F,O,!1,null,"b5041588",null),_=D.exports;function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S={data:function(){return{tableData:[],pageTotal:1,ruleForm:{name:"",phone:"",service:"",email:"",begin_time:"",of_time:"",leaving:"",state:"",money:""},tableHeight:0,paginationForm:{opr:"list",pid:"pc",pageNum:1,pageSize:20,startTime:"",endTime:"",searchName:""},dialog:{width:"400px",formLabelWidth:"120px"},dialogTitle:"",updateOrderDialog:{pcShow:!1,smShow:!1,dialogRow:{}},total:""}},components:{pcorderDialog:v,smorderDialog:_},computed:j({},Object(l["mapGetters"])(["systemType"])),mounted:function(){this.getDataList()},methods:{setTableHeight:function(){var e=this;this.$nextTick((function(){e.tableHeight=document.body.clientHeight-300}))},getDataList:function(){var e=this,t=Object.assign({},this.paginationForm);m(t).then((function(t){e.total=t.total,e.tableData=t.data||[],e.pageTotal=t.count}))},switchConverObj:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return{0:{val:"已完成",cls:'"completed"'},1:{val:"进行中",cls:"processing"},2:{val:"未完成",cls:"undone"}}[e]},handleCurrentChange:function(e){this.paginationForm.pageNum=e,this.getDataList()},handleSizeChange:function(e){this.paginationForm.pageSize=e,this.getDataList()},lookorderStatus:function(e){console.log(e,"row"),"添加订单详情"==this.dialogTitle?(this.ruleForm.title="添加订单详情",this.updateOrderDialog.dialogRow=j({},this.ruleForm)):(e.title="编辑订单详情",this.updateOrderDialog.dialogRow=j({},e)),this.showOrderDialog()},getOrderList:function(){},deleteOrder:function(e){var t=this;e.opr="delete",this.alertMsgBox().then((function(){m(e).then((function(e){t.message(e.msg),e.success&&t.getDataList()}))})).catch((function(e){t.message("已取消","info")}))},hideOrderDialog:function(){"pc"==this.systemType?this.updateOrderDialog.pcShow=!1:this.updateOrderDialog.smShow=!1},showOrderDialog:function(){"pc"==this.systemType?this.updateOrderDialog.pcShow=!0:this.updateOrderDialog.smShow=!0},selectSystem:function(e){console.log(e,"我是系统类型"),this.paginationForm.pid=e,this.getDataList()},changeDate:function(e){console.log(e,"我是日期"),this.paginationForm.startTime=e?Date.formatDate(e[0]):"",this.paginationForm.endTime=e?Date.formatDate(e[1]):"",this.getDataList()},searchUserList:function(e){console.log(e,"我是搜索"),this.paginationForm.searchName=e,this.getDataList()}}},$=S,x=(r("4799"),Object(h["a"])($,o,i,!1,null,"e2963f40",null));t["default"]=x.exports},f7db:function(e,t,r){}}]);