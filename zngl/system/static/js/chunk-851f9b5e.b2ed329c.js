(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-851f9b5e"],{"2b03":function(e,t,a){"use strict";var i=a("d7c3"),n=a.n(i);n.a},9647:function(e,t,a){"use strict";var i=a("b40f"),n=a.n(i);n.a},"9af1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload-file"},[e.uploadFile.isShow?a("upload-file-dialog",{attrs:{isShow:e.uploadFile.isShow},on:{getCaseList:e.getDataList,closeDialog:e.hideDialog}}):e._e(),a("el-dialog",{attrs:{visible:e.nameDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,width:"50%"},on:{"update:visible":function(t){e.nameDialog=t}}},[a("el-input",{attrs:{placeholder:"请输入文件名称",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitName}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.nameDialog=!1}}},[e._v("取 消")])],1)],1),a("el-button",{staticClass:"add-case",staticStyle:{"margin-bottom":"15px"},attrs:{type:"primary",size:"large"},on:{click:function(t){return e.showDialog()}}},[e._v("上传文件")]),a("search",{ref:"search",attrs:{customizePlaceholder:e.customizePlaceholder},on:{searchUserList:function(t){return e.searchUserList(t)}}}),a("div",{staticClass:"table_container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.table,height:e.tableHeight,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","default-sort":{prop:"create_time",order:"descending"},align:"center"}},[a("el-table-column",{attrs:{prop:"id",label:"id",align:"center",width:"100"}}),a("el-table-column",{attrs:{prop:"name",label:"文件名",align:"center"}}),a("el-table-column",{attrs:{prop:"url",label:"文件链接",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"type",label:"文件类型",align:"center",formatter:e.fileType,width:"100"}}),a("el-table-column",{attrs:{prop:"file_size",label:"文件大小",align:"center",width:"100"}}),a("el-table-column",{attrs:{prop:"file_type",label:"文件格式",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.file_type.toUpperCase()))])]}}])}),a("el-table-column",{attrs:{prop:"create_time",sortable:"",label:"更新日期",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(Date.format(t.row.create_time)))])]}}])}),a("el-table-column",{attrs:{prop:"operation",align:"center",label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"edit",size:"mini"},on:{click:function(a){return e.lookCase(t.row)}}},[e._v("预览")]),a("el-button",{attrs:{icon:"edit",size:"mini"},on:{click:function(a){return e.showEditNameDialog(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"delete",size:"mini"},on:{click:function(a){return e.deleteCase(t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{attrs:{pageTotal:e.pageTotal},on:{handleCurrentChange:e.handleCurrentChange,handleSizeChange:e.handleSizeChange}})],1)],1)},n=[],o=(a("7f7f"),a("a722"),a("a27e")),l=a("e490");function s(e){return Object(o["a"])({url:"uploadCaseLists/listPage",method:"get",params:e})}function r(e){return Object(o["a"])({url:"uploadCaseLists/add",method:"post",data:e})}function c(e){return Object(o["a"])({url:"uploadCaseLists/delete?id=".concat(e),method:"delete"})}function u(e){return Object(o["a"])({url:"uploadCaseLists/edit",method:"put",params:e})}var p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{visible:e.isVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,center:""},on:{"update:visible":function(t){e.isVisible=t},close:e.closeDialog}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.tabsClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"上传图片",name:"img"}},[a("el-input",{staticStyle:{"margin-bottom":"15px"},attrs:{placeholder:"请输入图片名",clearable:"",maxlength:"40","show-word-limit":""},nativeOn:{keyup:function(t){return e.btKeyUp(t)}},model:{value:e.enterImgName,callback:function(t){e.enterImgName=t},expression:"enterImgName"}}),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.action,"show-file-list":!1,"before-upload":e.imgBeforeUpload,"http-request":e.uploadSectionFile,"list-type":"picture-card"}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传图片，且不超过20MB")])])],1),a("el-tab-pane",{attrs:{label:"上传文件",name:"file"}},[a("el-input",{staticStyle:{"margin-bottom":"15px"},attrs:{placeholder:"请输入文件名",clearable:"",maxlength:"40","show-word-limit":""},nativeOn:{keyup:function(t){return e.btKeyUp(t)}},model:{value:e.enterFileName,callback:function(t){e.enterFileName=t},expression:"enterFileName"}}),a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:e.action,multiple:"","before-upload":e.fileBeforeUpload,"http-request":e.uploadSectionFile,limit:1}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("\n            将文件拖到此处，或\n            "),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传文件，且不超过20MB")])])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFile}},[e._v("提 交")]),a("el-button",{on:{click:e.closeDialog}},[e._v("取 消")])],1)],1)],1)},d=[],m=(a("8e6e"),a("ac6a"),a("456d"),a("a481"),a("bd86")),g=a("5880");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(a,!0).forEach((function(t){Object(m["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={name:"uploadFileDialog",data:function(){return{isVisible:this.isShow,activeName:"img",imageUrl:"",action:"/uploadCaseLists/add",files:"",fileName:"",enterImgName:"",enterFileName:"",type:""}},props:{isShow:Boolean,default:!0},computed:h({},Object(g["mapGetters"])(["status"])),methods:{imgBeforeUpload:function(e){this.files=e;var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<20;return t||this.$message.error("上传头像图片只能是图片格式!"),a||this.$message.error("上传头像图片大小不能超过 20MB!"),this.fileName=e.name,t&&a},fileBeforeUpload:function(e){this.files=e},closeDialog:function(){this.$emit("closeDialog")},tabsClick:function(){"file"==this.activeName?(this.imageUrl="",this.enterImgName=""):this.enterFileName=""},uploadSectionFile:function(){this.toUrl(this.files)},submitFile:function(){var e=this,t=this.files.type;t="image/jpeg"==t||"image/png"==t?2:1;var a=this.enterImgName?this.enterImgName:this.enterFileName,i=new FormData;i.append("file",this.files),i.append("name",a),i.append("directory","system"),i.append("state",0);var n={headers:{"Content-Type":"multipart/form-data"}};this.$axios.post("".concat(l["a"],"/common/fileWrite"),i,n).then((function(a){if(0===a.data.code){var i=a.data.data,n={name:i.name,type:t,url:i.url,file_size:i.size,file_type:i.suffix};r(n).then((function(t){e.message("上传成功"),e.isVisible=!1,e.$emit("getCaseList")}))}else e.$message.error(a.data.data.msg)}))},btKeyUp:function(e){e.target.value=e.target.value.replace(/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、]/g,"")},toUrl:function(e){var t=this,a=new FileReader;a.readAsDataURL(e),a.onload=function(e){t.imageUrl=e.target.result}}}},v=b,y=(a("2b03"),a("2877")),w=Object(y["a"])(v,p,d,!1,null,"7af5c530",null),_=w.exports,C={name:"uploadFile",data:function(){return{table:[],loading:!0,tableHeight:0,uploadFile:{isShow:!1},paginationForm:{pageNum:1,pageSize:20,search_name:""},pageTotal:0,customizePlaceholder:"请输入文件名",id:"",name:"",nameDialog:!1}},components:{uploadFileDialog:_},computed:{},mounted:function(){this.getDataList(),this.setTableHeight()},methods:{setTableHeight:function(){var e=this;this.$nextTick((function(){e.tableHeight=document.body.clientHeight-250}))},getDataList:function(){var e=this,t=this.paginationForm;s(t).then((function(t){e.table=t.data||[],e.pageTotal=t.count})).finally((function(){e.loading=!1}))},handleCurrentChange:function(e){this.paginationForm.pageNum=e,this.getDataList()},handleSizeChange:function(e){this.paginationForm.pageSize=e,this.getDataList()},deleteCase:function(e){var t=this,a=e.id;this.alertMsgBox().then((function(){c(a).then((function(e){t.message(e.msg),t.getDataList()}))})).catch((function(e){t.message("已取消","info")}))},selectSystem:function(e){this.paginationForm.pageNum=1,this.paginationForm.pid=e,this.getDataList()},searchUserList:function(e){this.paginationForm.pageNum=1,this.paginationForm.search_name=e,this.getDataList()},showDialog:function(){this.uploadFile.isShow=!0},hideDialog:function(){this.uploadFile.isShow=!1},lookCase:function(e){var t=e.url,a=getStore("ip");window.open(a+t)},showEditNameDialog:function(e){this.id=e.id,this.name=e.name,this.nameDialog=!0},submitName:function(){var e=this,t={id:this.id,name:this.name};this.name?u(t).then((function(t){e.message("修改成功"),e.nameDialog=!1,e.getDataList()})):this.message("请输入文件名称","error")},fileType:function(e){var t=e.type;return 1===t?"文件":2===t?"图片":"未知"}}},D=C,k=(a("9647"),Object(y["a"])(D,i,n,!1,null,"b5be683e",null));t["default"]=k.exports},a722:function(e,t,a){"use strict";a("a27e")},b40f:function(e,t,a){},d7c3:function(e,t,a){},e490:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var i="http://192.168.31.80:15000"}}]);